<!DOCTYPE html>
<html>
    <head lang="en">
        <meta charset="UTF-8"/>
        <meta data-mutation-stats="%7B%22all%22:0,%22killed%22:0,%22survived%22:0,%22ignored%22:0,%22untested%22:0,%22success%22:0,%22successRate%22:%220.0%22,%22killedRate%22:%220.0%22,%22survivedRate%22:%220.0%22,%22ignoredRate%22:%220.0%22,%22untestedRate%22:%220.0%22%7D"/>
        <title>itemInclusion.js - Mutation test results</title>
        <style type="text/css">
    html, body {
        margin: 0;
        padding: 0;
        font-family: 'Helvetica Neue', 'Helvetica', 'Verdana', 'Arial', sans-serif;
        font-size: 14px;
    }

    header, nav, main, footer {
        display: block;
        padding: 10px;
    }

    header {
        background-color: #fff5a0;
        border-bottom: 1px solid #ddd130;
    }

    header.survived {
        border-bottom-color: #b46767;
    }

    header.killed {
        border-bottom-color: #516948;
    }

    header h1 {
        font-size: 18px;
        font-weight: normal;
    }

    header h1 .fileName {
        font-weight: bold;
    }

    #mutationStats {
        margin-top: 10px;
    }

    .stat {
        display: inline-block;
        width: 250px;
    }

    .stat .statValue {
        border: 1px solid black;
        padding: 4px;
        background-color: white;
        font-weight: bold;
    }

    .stat .statValue small {
        color: #666;
        font-weight: normal;
        font-size: 11px;
    }

    nav {
        background-color: #ffe87c;
        border-bottom: 1px solid #b49d5e;
    }

    nav .link {
        color: black;
        text-decoration: underline;
    }

    footer {
        background-color: #ddd;
        border-top: 1px solid #aaa;
    }

    footer p {
        margin: 0;
    }

    .killed {
        background-color: #b5d592;
    }

    .survived {
        background-color: #fc8c84;
    }

    .neutral {
        background-color: #ffe87c;
    }

    #toggleKilledMutations {
    background-color: #eee;
    border: 1px solid #666;
    padding: 6px 10px;
    border-radius: 2px;
    cursor: pointer;
}
#toggleKilledMutations:hover {
    background-color: #aaa;
}
#toggleKilledMutations:active {
    background-color: #666;
    border-color: #eee;
}

#source {
    font-family: 'Consolas', 'Courier New', 'Lucida Sans Typewriter', monospace;
    white-space: pre;
}

#mutations {
    border-collapse: collapse;
}

#mutations th, #mutations td {
    padding: 5px 15px;
    border: 1px solid #666;
}

#mutations th {
    background-color: #eee;
    font-weight: normal;
    text-align: left;
}

#popup {
    position: fixed;
    border: solid 1px black;
    padding: 3px;
    display: none;
}

#popup.show {
    display: block;
}

code .killed, code .survived {
    border: solid 1px white;
}

</style>

        <script type="text/javascript">
    function onLoad() {
    each(document.getElementsByClassName('code'), function(element) {
        element.addEventListener('mouseover', onMouseOver, false);
        element.addEventListener('mousemove', onMouseMove, false);
        element.addEventListener('mouseout', onMouseOut, false);
    });
}

function each(list, fn, thisArg) {
    Array.prototype.forEach.call(list, fn, thisArg);
}

function onMouseOver(event) {
    var popup = document.getElementById('popup');
    addMutations(popup, event.target);
    setPopupPosition(popup, event);
    popup.classList.add("show");
}

function onMouseMove(event) {
    setPopupPosition(document.getElementById('popup'), event);
}

function onMouseOut() {
    document.getElementById('popup').classList.remove('show');
}

function addMutations(popup, target) {
    var mutationEl;

    each(target.classList, function(_class) {
        if (_class.indexOf('mutation_') > -1) {
            mutationEl = document.getElementById(_class);
            if (Array.prototype.indexOf.call(mutationEl.classList, 'killed') > -1) {
                popup.classList.add('killed');
                popup.classList.remove('survived');
            } else {
                popup.classList.add('survived');
                popup.classList.remove('killed');
            }
            popup.classList.add(mutationEl.classList);
            popup.innerHTML = mutationEl.innerHTML;
        }
    });
}

var showKilledMutations = true;
function toggleKilledMutations() {
    showKilledMutations = !showKilledMutations;

    if(showKilledMutations) {
        document.querySelector('#toggleKilledMutations').innerHTML = 'Hide killed mutations';
        each(document.querySelectorAll('.code.killed'), function(e) {
            e.style.backgroundColor = '';
        });
        each(document.querySelectorAll('#mutations .killed'), function(e) {
            e.style.display = '';
        });
    } else {
        document.querySelector('#toggleKilledMutations').innerHTML = 'Show killed mutations';
        each(document.querySelectorAll('.code.killed'), function(e) {
            e.style.backgroundColor = 'white';
        });
        each(document.querySelectorAll('#mutations .killed'), function(e) {
            e.style.display = 'none';
        });
    }
}

function setPopupPosition(popup, event) {
    var top = event.clientY,
        left = event.clientX + 10;

    popup.setAttribute('style', 'top:' + top + 'px;left:' + left + 'px;');
}

window.onload = onLoad;

</script>
    </head>

    <body>
        <header class="neutral">
            <h1>
                Mutation test results for
                <span class="fileName">
                        itemInclusion.js
                </span>
            </h1>

            <section id="mutationStats">
                <div class="stat">
                    Success rate:&nbsp;
                    <span class="statValue">
                        0.0%&nbsp;
                        <small>
                            (0 / 0)
                        </small>
                    </span>
                </div>
                <div class="stat">
                    Survived:&nbsp;
                    <span class="statValue">
                        0.0%&nbsp;
                        <small>
                            (0 / 0)
                        </small>
                    </span>
                </div>
                <div class="stat">
                    Ignored:&nbsp;
                    <span class="statValue">
                        0.0%&nbsp;
                        <small>
                            (0 / 0)
                        </small>
                    </span>
                </div>
                <div class="stat">
                    Untested:&nbsp;
                    <span class="statValue">
                        0.0%&nbsp;
                        <small>
                            (0 / 0)
                        </small>
                    </span>
                </div>
            </section>
        </header>

        <nav><a class="link " href="../../../../../mutation-test-html/index.html">mutation-test-html</a> >> <a class="link " href="../../../../../mutation-test-html/src/index.html">src</a> >> <a class="link " href="../../../../../mutation-test-html/src/js/index.html">js</a> >> <a class="link " href="../../../../../mutation-test-html/src/js/directives/index.html">directives</a> >> <a class="link " href="../../../../../mutation-test-html/src/js/directives/itemInclusion/index.html">itemInclusion</a> >> itemInclusion.js</nav>

        <main>
            
<section>
    <code id="source"><ol><li>// Purpose is to build promotion data.</li><li>app.directive('itemInclusion', ['itemsDataService', 'DataFactory',</li><li>    function (itemsDataService, DataFactory) {</li><li>        return {</li><li>            restrict: 'E',</li><li>            templateUrl: 'itemInclusion.html',</li><li>            scope: {</li><li>                data: '=',</li><li>                purchaseoption: '=',</li><li>                itemtype: '=',</li><li>                promoform: '=',</li><li>                isDisabled: '=',</li><li>                viewProp: '='</li><li>            },</li><li>            controller: function ($scope) {</li><li>                $scope.$watch('purchaseoption', function (nv) {</li><li>                    if (nv) {</li><li></li><li>                        if (nv === 'itemsku') {</li><li>                            $scope.isSkuSearch = true;</li><li>                        } else {</li><li>                            $scope.isSkuSearch = false;</li><li>                        }</li><li>                    }</li><li>                });</li><li></li><li>            },</li><li>            link: function (scope) {</li><li></li><li>                var omsData = {};</li><li>                var skuData = {};</li><li>                var existingID = '';</li><li>                scope.searchResults = [];</li><li></li><li>                scope.isSkuSearch = false;</li><li>                scope.validOmsInfo = [];</li><li>                scope.validSkuInfo = [];</li><li>                scope.inValidOmsInfo = false;</li><li>                scope.inValidSkuInfo = false;</li><li>                scope.showInvalidError = false;</li><li></li><li>                function addItem(item) {</li><li></li><li>                    if (!scope.data) {</li><li>                        scope.data = [];</li><li>                    }</li><li>                    if (scope.data.indexOf(item.omsId) === -1) {</li><li>                        scope.validOmsInfo.push(item);</li><li>                        setData();</li><li>                    } else {</li><li>                        existingID += item.omsId + ', ';</li><li>                        DataFactory.messageModal.message = 'Following item/s are already added: ' + existingID</li><li>                        DataFactory.messageModal.title = 'Warning';</li><li>                        $('#messageModal').popup();</li><li>                    }</li><li></li><li>                }</li><li></li><li>                function addSku(sku) {</li><li></li><li>                    if (!scope.data) {</li><li>                        scope.data = [];</li><li>                    }</li><li>                    if (scope.data.indexOf(sku.skuNumber) === -1) {</li><li>                        scope.validSkuInfo.push(sku);</li><li>                        setSkuData();</li><li>                    } else {</li><li>                        existingID += sku.skuNumber + ', ';</li><li>                        DataFactory.messageModal.message = 'Following Sku/s are already added: ' + existingID</li><li>                        DataFactory.messageModal.title = 'Warning';</li><li>                        $('#messageModal').popup();</li><li>                    }</li><li></li><li>                }</li><li></li><li>                function setData() {</li><li>                    scope.itemtype = 'OMS';</li><li>                    scope.data = scope.validOmsInfo.reduce(function (data, item) {</li><li>                        return data.concat(item.omsId);</li><li>                    }, []);</li><li>                }</li><li></li><li>                function setSkuData() {</li><li>                    scope.itemtype = 'SKU';</li><li></li><li>                    scope.data = scope.validSkuInfo.reduce(function (data, sku) {</li><li>                        return data.concat(sku.skuNumber);</li><li>                    }, []);</li><li>                }</li><li></li><li>                function setItemData(data, clicked) {</li><li>                    existingID = '';</li><li></li><li>                    if (!scope.validOmsInfo.length && scope.data && !scope.itemSearch) {</li><li>                        $.extend(true, scope.validOmsInfo, data.validOmsInfo);</li><li>                    }</li><li></li><li>                    if (data.validOmsInfo && scope.itemSearch) {</li><li></li><li>                        for (var i = 0; i < data.validOmsInfo.length; i++) {</li><li>                            addItem(data.validOmsInfo[i]);</li><li>                        }</li><li>                    }</li><li></li><li>                    // if invalid Data set to item search</li><li>                    scope.itemSearch = (data.inValidOmsInfo) ? [data.inValidOmsInfo.toString().replace(/,/g, ' ')] : [];</li><li>                    scope.inValidOmsInfo = (scope.itemSearch.length > 0);</li><li>                    var invalidIds = data.inValidOmsInfo;</li><li>                    if (clicked && invalidIds && invalidIds.length > 0) {</li><li>                        DataFactory.messageModal.message = 'Following Items/OMS ID\'s are invalid: ' + invalidIds.toString();</li><li>                        DataFactory.messageModal.title = 'Warning';</li><li>                        $('#messageModal').popup();</li><li>                    }</li><li>                }</li><li></li><li></li><li>                function setSkuValidData(data, clicked) {</li><li>                    existingID = '';</li><li></li><li>                    if (!scope.validSkuInfo.length && scope.data && !scope.itemSkuSearch) {</li><li>                        $.extend(true, scope.validSkuInfo, data.validSkuInfo);</li><li>                    }</li><li></li><li>                    if (data.validSkuInfo && scope.itemSkuSearch) {</li><li>                        for (var i = 0; i < data.validSkuInfo.length; i++) {</li><li>                            addSku(data.validSkuInfo[i]);</li><li>                        }</li><li>                    }</li><li></li><li>                    // if invalid Data set to item search</li><li>                    scope.itemSkuSearch = (data.inValidSkuInfo) ? [data.inValidSkuInfo.toString().replace(/,/g, ' ')] : [];</li><li></li><li>                    scope.inValidSkuInfo = (scope.itemSkuSearch.length > 0);</li><li>                    var invalidIds = data.inValidSkuInfo;</li><li>                    if (clicked && invalidIds && invalidIds.length > 0) {</li><li>                        DataFactory.messageModal.message = 'Following SKU ID\'s are invalid: ' + invalidIds.toString();</li><li>                        DataFactory.messageModal.title = 'Warning';</li><li>                        $('#messageModal').popup();</li><li>                    }</li><li>                }</li><li></li><li>                function getItemsByID(data, clicked) {</li><li></li><li>                    if (scope.isSkuSearch) {</li><li></li><li>                        var tempSkuData = {};</li><li></li><li>                        tempSkuData.skuNumbers = itemsDataService.getSkuIDs(data.skuIds)</li><li></li><li>                        var itemPromise = itemsDataService.getSkuIdCodes(tempSkuData);</li><li></li><li>                        itemPromise.then(</li><li>                            function (data) {</li><li>                                setSkuValidData(data, clicked);</li><li>                            },</li><li>                            function (error) {</li><li>                                DataFactory.messageModal.message = error;</li><li>                                DataFactory.messageModal.title = 'Error';</li><li>                                $('#messageModal').popup();</li><li>                            });</li><li></li><li></li><li></li><li>                    } else {</li><li></li><li>                        var tempData = {};</li><li>                        tempData.omsIds = itemsDataService.getOmsIDs(data.omsIds)</li><li>                        itemPromise = itemsDataService.getOmsIdCodes(tempData);</li><li></li><li>                        itemPromise.then(</li><li>                            function (data) {</li><li>                                setItemData(data, clicked);</li><li>                            },</li><li>                            function (error) {</li><li>                                DataFactory.messageModal.message = error;</li><li>                                DataFactory.messageModal.title = 'Error';</li><li>                                $('#messageModal').popup();</li><li>                            });</li><li>                    }</li><li></li><li>                }</li><li></li><li>                function validateItemData(data) {</li><li></li><li>                    if (data.length == 0) {</li><li>                        scope.showInvalidError = true;</li><li>                        return;</li><li>                    }</li><li></li><li>                    for (var i = 0; i < data.length; i++) {</li><li>                        if (/\s/g.test(data[i]) || /[a-z]/i.test(data[i])) {</li><li></li><li>                            scope.showInvalidError = true;</li><li>                            return;</li><li>                        }</li><li>                        if (!scope.isSkuSearch && data[i] && data[i].length != 9) {</li><li></li><li>                            scope.showInvalidError = true;</li><li>                            return;</li><li>                        }</li><li>                        if (scope.isSkuSearch && data[i] && (data[i].length != 6 && data[i].length != 10)) {</li><li></li><li>                            scope.showInvalidError = true;</li><li>                            return;</li><li>                        }</li><li>                        scope.showInvalidError = false;</li><li>                    }</li><li>                }</li><li></li><li>                if (scope.data && scope.data.length) {</li><li></li><li>                    if (scope.itemtype == 'SKU') {</li><li>                        scope.isSkuSearch = true;</li><li>                    }</li><li>                    if (scope.isSkuSearch) {</li><li>                        skuData.skuIds = scope.data;</li><li>                        getItemsByID(skuData);</li><li>                    } else {</li><li>                        omsData.omsIds = scope.data;</li><li>                        getItemsByID(omsData);</li><li></li><li>                    }</li><li></li><li>                }</li><li></li><li>                scope.searchResults = [];</li><li></li><li></li><li>                scope.removePromoCode = function (index) {</li><li>                    if (scope.isSkuSearch) {</li><li>                        scope.validSkuInfo.splice(index, 1);</li><li>                        setSkuData();</li><li>                    } else {</li><li>                        scope.validOmsInfo.splice(index, 1);</li><li>                        setData();</li><li>                    }</li><li></li><li>                }</li><li></li><li>                function emptyCheck(data) {</li><li>                    if (!data || data == null || data == '') {</li><li>                        return true;</li><li>                    }</li><li>                }</li><li></li><li>                scope.search = function (data) {</li><li>                    if (emptyCheck(data)) {</li><li>                        if (scope.isSkuSearch) {</li><li>                            scope.dataEmpty = true;</li><li>                            DataFactory.messageModal.message = 'Please enter a valid SKU Number';</li><li>                            DataFactory.messageModal.title = 'Warning';</li><li>                            $('#messageModal').popup();</li><li>                        } else {</li><li>                            scope.dataEmpty = true;</li><li>                            DataFactory.messageModal.message = 'Please enter Valid OMS Number';</li><li>                            DataFactory.messageModal.title = 'Warning';</li><li>                            $('#messageModal').popup();</li><li></li><li>                        }</li><li>                    } else</li><li>                    if (scope.isSkuSearch) {</li><li>                        scope.dataEmpty = false;</li><li>                        data = data.replace(/\s\s+/g, ' ').split(/[',',' ',', ']+/);</li><li>                        validateItemData(data);</li><li>                        skuData.skuIds = data;</li><li>                    } else {</li><li>                        scope.dataEmpty = false;</li><li>                        data = data.replace(/\s\s+/g, ' ').split(/[',',' ',', ']+/);</li><li>                        validateItemData(data);</li><li>                        omsData.omsIds = data;</li><li></li><li>                    }</li><li></li><li>                    if (!scope.showInvalidError && !scope.dataEmpty) {</li><li>                        if (scope.isSkuSearch) {</li><li>                            getItemsByID(skuData, true);</li><li>                        } else {</li><li>                            getItemsByID(omsData, true);</li><li>                        }</li><li></li><li></li><li>                    }</li><li></li><li>                }</li><li>                scope.removeAll = function () {</li><li>                    if (scope.isSkuSearch) {</li><li>                        scope.validSkuInfo = [];</li><li>                        setSkuData();</li><li>                    } else {</li><li>                        scope.validOmsInfo = [];</li><li>                        setData();</li><li>                    }</li><li></li><li>                }</li><li>                scope.clear = function () {</li><li>                    if (scope.isSkuSearch) {</li><li>                        scope.inValidSkuInfo = false;</li><li>                    } else {</li><li>                        scope.inValidOmsInfo = false;</li><li>                    }</li><li></li><li>                }</li><li></li><li></li><li>            }</li><li>        };</li><li>    }</li><li>]);</li><li></li></ol></code>
</section>

<section>
    <h2>Mutations</h2>
        <p>
            No mutations could be performed on this file. This may be due to one of the following reasons:
        </p>
        <ul>
            <li>No unit tests exist for this file</li>
            <li>No specs were configured for this file</li>
            <li>Unit tests are failing already without applying any mutations</li>
            <li>All possible mutations in this file were excluded</li>
        </ul>
</section>

<div id="popup" aria-hidden="true"></div>

        </main>

        <footer>
            <p>Report generated by <a class="brand" href="https://www.npmjs.com/package/grunt-mutation-testing">grunt-mutation-testing</a> on 6/5/2017, 4:07:58 PM.</p>
        </footer>
    </body>
</html>
